/*******************************************************************************
* Leonardo Mudrek de Almeida
* UTFPR - CT
*
*
* License : MIT
*******************************************************************************/

/*******************************************************************************
* INCLUDES
*******************************************************************************/
#include "peripherals.h"
#include "pt.h"
#include "app.h"
#include "proximity.h"
#include "tm4c123gh6pm.h"
/*******************************************************************************
* DEFINES E ENUMS
*******************************************************************************/

/*******************************************************************************
* TYPEDEFS
*******************************************************************************/

/*******************************************************************************
* CONSTANTES
*******************************************************************************/

/*******************************************************************************
* VARIÁVEIS
*******************************************************************************/
/**
 *   \brief Estrutura de controle da protothread da APP
 */
static struct pt taskAppPt = {0};

/**
 *   \brief Estrutura de controle da protothread do sensor de proximidade
 */
static struct pt taskProximityPt = {0};

/*******************************************************************************
* PROTÓTIPOS DE FUNÇÕES
*******************************************************************************/

/*******************************************************************************
* FUNÇÕES EXPORTADAS
*******************************************************************************/

/*******************************************************************************
* FUNÇÕES LOCAIS
*******************************************************************************/

int main(void){ 
  peripherals_init();

  PT_INIT(&taskAppPt);
  PT_INIT(&taskProximityPt);

  while(true) {
    taskApp(&taskAppPt);
    taskProximity(&taskProximityPt);
  }
}

/*******************************************************************************
* END OF FILE
*******************************************************************************/
